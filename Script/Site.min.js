var ap=angular.module("AzurePing",[]);ap.controller("AzurePingCtrl",["$scope","$http","$timeout",function(n,t,i){var o;n.datacentres=[{location:"West USA (California)",url:"westusa"},{location:"North Central USA (Chicago, IL)",url:"northcentralusa"},{location:"East USA (Virginia)",url:"eastusa"},{location:"North Europe (Dublin, Ireland)",url:"northeurope"},{location:"East Asia (Hong Kong, China)",url:"eastasia"}];var u=function(n,t){return"http://"+n+"-azure.azurewebsites.net/Tiny.ashx"+(t?"":"?callback=JSON_CALLBACK")},r=function(n){return t.jsonp(u(n),{cache:!1,timeout:1e4})},f=function(){return(new Date).getTime()},e=function(){return!!(window.performance&&window.performance.getEntries)},s=function(n,t){var f,i,r;return e()?(f=u(n,!0),i=window.performance.getEntries().filter(function(n){return n.name.indexOf(f)===0}),i===0)?t:(r=i[i.length-1],!r.duration)?t:Math.round(r.duration):t};n.supportsPerformanceApi=e(),o=function(){return angular.forEach(n.datacentres,function(n){r(n.url)})},i(o,100,!1),n.run=function(){angular.forEach(n.datacentres,function(n){n.latencyMessage="Loading...",n.isFailure=!1;var t=function(){var t=f();r(n.url).error(function(){n.latencyMessage="Failed",n.isFailure=!0}).success(function(){var r=f()-t,i=s(n.url,r);n.latencyMilliseconds=i,n.latencyMessage=i+" ms"})};r(n.url).then(t,t)})}}])