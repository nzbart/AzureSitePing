var ap=angular.module("AzurePing",[]);ap.controller("AzurePingCtrl",["$scope","$http","$timeout",function(n,t,i){n.datacentres=[{location:"West USA (California)",url:"westusa"},{location:"North Central USA (Chicago, IL)",url:"northcentralusa"},{location:"East USA (Virginia)",url:"eastusa"},{location:"North Europe (Dublin, Ireland)",url:"northeurope"},{location:"East Asia (Hong Kong, China)",url:"eastasia"}];var f=function(n){return"http://"+n+"-azure.azurewebsites.net/Tiny.ashx?callback=JSON_CALLBACK"},r=function(n){return t.jsonp(f(n),{cache:!1,timeout:1e4})},u=function(){return(new Date).getTime()},e=function(){return angular.forEach(n.datacentres,function(n){r(n.url)})};i(e,100,!1),n.run=function(){angular.forEach(n.datacentres,function(n){n.latencyMessage="Loading...",n.isFailure=!1;var t=function(){var t=u();r(n.url).error(function(){n.latencyMessage="Failed",n.isFailure=!0}).success(function(){var r=u(),i=r-t;n.latencyMilliseconds=i,n.latencyMessage=i+" ms"})};r(n.url).then(t,t)})}}])