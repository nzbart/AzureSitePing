var ap=angular.module("AzurePing",[]);ap.controller("AzurePingCtrl",["$scope","$http",function(n,t){n.datacentres=[{location:"West USA (California)",url:"westusa"},{location:"North Central USA (Chicago, IL)",url:"northcentralusa"},{location:"East USA (Virginia)",url:"eastusa"},{location:"North Europe (Dublin, Ireland)",url:"northeurope"},{location:"East Asia (Hong Kong, China)",url:"eastasia"}];var u=function(n){return"http://"+n+"-azure.azurewebsites.net/Tiny.ashx?callback=JSON_CALLBACK"},i=function(n){return t.jsonp(u(n),{cache:!1,timeout:1e4})},r=function(){return(new Date).getTime()};angular.forEach(n.datacentres,function(n){i(n.url)}),n.run=function(){angular.forEach(n.datacentres,function(n){n.latencyMessage="Loading...",n.isFailure=!1;var t=function(){var t=r();i(n.url).error(function(){n.latencyMessage="Failed",n.isFailure=!0}).success(function(){var u=r(),i=u-t;n.latencyMilliseconds=i,n.latencyMessage=i+" ms"})};i(n.url).then(t,t)})}}])